@use "../theme" as *;

.code-block {
  position: relative;
  margin-block: clamp(1rem, 3vw, 1.75rem);
}

.code-block[data-lang]::after {
  content: attr(data-lang);
  position: absolute;
  top: 0.5rem;
  left: 0.75rem;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: color-mix(in srgb, theme(code) 65%, theme(bg) 35%);
  opacity: 0.7;
  pointer-events: none;
}

.code-copy {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  border: 1px solid color-mix(in srgb, theme(code) 50%, theme(bg) 50%);
  border-radius: 999px;
  background: color-mix(in srgb, theme(bg) 85%, theme(code) 15%);
  color: theme(code);
  padding: 0.35rem 0.85rem;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background-color 160ms ease;
}

.code-copy:focus-visible {
  outline: 2px solid theme(accent);
  outline-offset: 2px;
}

.code-copy:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
  background: color-mix(in srgb, theme(bg) 80%, theme(code) 20%);
}

.code-copy.is-copied {
  border-color: color-mix(in srgb, theme(accent) 60%, theme(code) 40%);
  background: color-mix(in srgb, theme(bg) 75%, theme(accent) 25%);
  color: theme(accent);
}

.code-copy__label::after {
  content: attr(data-copy);
}

.code-copy.is-copied .code-copy__label::after {
  content: attr(data-copied);
}

.code-copy__label {
  pointer-events: none;
}

.highlight,
pre {
  max-width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  white-space: pre;
  border-radius: 0.75rem;
  padding-top: 1.75rem;
  padding-inline: clamp(1rem, 3vw, 1.5rem);
  padding-bottom: clamp(1rem, 3vw, 1.4rem);
  background: theme(bg-code);
  color: theme(code);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, theme(code) 35%, transparent);
}

code {
  font-size: 0.9rem;
  line-height: 1.55;
}
